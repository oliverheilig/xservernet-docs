<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Layer Priorities Concept</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="918149a8-2996-40a9-878d-12a002e6b222" /><meta name="Description" content="A map can consist of multiple layers. This page explains how to influence the drawing order of different layers by giving them a priority." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">PTV xServer .NET<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\9e985ce7-8d43-434f-82bb-260b742553c1.htm" title="PTV xServer .NET" tocid="roottoc">PTV xServer .NET</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/7101665d-481f-449c-ae22-4f6a21aba3e8.htm" title="Concepts" tocid="7101665d-481f-449c-ae22-4f6a21aba3e8">Concepts</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/06a654f3-afbd-4f00-9c8e-36997e2a3951.htm" title="Shape Layer Concept" tocid="06a654f3-afbd-4f00-9c8e-36997e2a3951">Shape Layer Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/efdeef71-8995-49a7-b15c-01f3dd65a3c8.htm" title="Custom Layers Concept" tocid="efdeef71-8995-49a7-b15c-01f3dd65a3c8">Custom Layers Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/22E8CFA4-B9CE-4F97-A90D-C32E3AF957F9.htm" title="Coordinates Concept" tocid="22E8CFA4-B9CE-4F97-A90D-C32E3AF957F9">Coordinates Concept</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/918149a8-2996-40a9-878d-12a002e6b222.htm" title="Layer Priorities Concept" tocid="918149a8-2996-40a9-878d-12a002e6b222">Layer Priorities Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8f6464b9-058b-4427-93a1-a0ce88eab26e.htm" title="Map and Layers Concept" tocid="8f6464b9-058b-4427-93a1-a0ce88eab26e">Map and Layers Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/28b979e6-9140-4d12-b62a-ef9a5be263a4.htm" title="Map Viewport Concept" tocid="28b979e6-9140-4d12-b62a-ef9a5be263a4">Map Viewport Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5e97e57f-ad50-4dda-af0b-e117af8c4fcd.htm" title="Theming Concept" tocid="5e97e57f-ad50-4dda-af0b-e117af8c4fcd">Theming Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/12bdf69b-60fc-4fe9-86e6-16b0adac2972.htm" title="Logging Concept" tocid="12bdf69b-60fc-4fe9-86e6-16b0adac2972">Logging Concept</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Layer Priorities Concept</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>
        A map can consist of multiple layers. This page explains how to influence the drawing order of different
        layers by giving them a priority.
      </p><p>This page contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#LayerStructure">Layer Structure</a></li><li class="outlineSectionEntry"><a href="#LayersAndCanvases">Layers and Canvases</a></li><li class="outlineSectionEntry"><a href="#PriorityAndCategory">Bringing Together Priority and Category</a></li><li class="outlineSectionEntry"><a href="#ChangingPriority">Changing Layer Priority</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul></div><div class="collapsibleAreaRegion" id="LayerStructure"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Layer Structure</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          A map layer is used to display content like objects, symbols, shapes, text etc. in a map. As described
          in the <a href="efdeef71-8995-49a7-b15c-01f3dd65a3c8.htm">Custom Layers Concept</a>, a layer consists beneath other parts
          of a canvas for rendering. More detailed, there is not only one canvas but there can be a whole set of canvases.
        </p><p>Regarding priority rules, it is important to have this in mind:</p><ul><li><p>A map can consist of multiple layers.</p></li><li><p>Each layer can hold multiple canvases for display.</p></li></ul><p>
          In the map, all layers are held in a <a href="T_Ptv_XServer_Controls_Map_LayerCollection.htm">LayerCollection</a>.
          This collection offers adding, deleting and inserting single layers. The position of a layer in the
          collection is the layer priority at the same time. The layer at position 0 is drawn first, what means that it
          is painted at the bottom of the map. All other layers are drawn succeedingly on top of their predecessor,
          following the order given by the collection. Like this, the priority indicates where the objects of a certain
          layer are painted - above or below the objects of another layer.
        </p><p>
          The order of the layers is visualized in the <a href="T_Ptv_XServer_Controls_Map_Gadgets_LayersGadget.htm">LayersGadget</a>
          which is shown in the map. Expanding the layers gadget, the layer collection is shown listing all integrated layers
          of the map. In the screenshot below, the background (titled as "Hintergrund") is drawn first, followed by the
          shape file layer, the labels (titled as "Beschriftung"), the WPF tours and the WPF locations. As
          can be seen in the screenshot of the map, the WPF objects are all painted above the labels and
          the colored shapes.
        </p><div class="mediaCenter"><img alt="Layer Priority" src="../media/LayerPriority.png" /><div class="caption">Layer priority shown in the layers gadget.</div></div></div><div class="collapsibleAreaRegion" id="LayersAndCanvases"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Layers and Canvases</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          As already mentioned before, a layer can hold a whole set of canvases. It could be reasonable for example to
          manage different types of objects within a single layer but to separate their rendering in different
          canvases. Indeed, most of the layers in the code samples do hold different canvases. In these samples
          often one canvas shows the objects in general and a second one highlights the selected objects. In this case,
          it would be reasonable to show the selected objects topmost. That is why some kind of sequence ordering
          is also needed for the canvases.
        </p><p>
          To differ between multiple canvases, a <a href="P_Ptv_XServer_Controls_Map_Canvases_MapCanvas_CanvasCategory.htm">CanvasCategory</a>
          has to be defined for each canvas. The category gives a hint on how important the objects of the canvas are.
          Some objects have to be drawn on top to emphasize them, others have to be drawn more in the background not
          covering important ones. The <a href="T_Ptv_XServer_Controls_Map_Canvases_CanvasCategory.htm">CanvasCategory</a>
          enumeration shows which categories are available:
        </p><ul><li><p>4 = Topmost - The objects of this canvas are shown on top of all other objects.</p></li><li><p>
              3 = Selected Objects - The objects of this canvas are selected objects and have to be shown rather on top.
            </p></li><li><p>
              2 = Content Labels - The objects of this canvas are describing texts of content objects so that they are
              to be displayed on top of the content objects.
            </p></li><li><p>
              1 = Content - The objects of this canvas are content objects which have to be displayed above the
              background but below more important objects.
            </p></li><li><p>
              0 = Base Map - This canvas shows a background which has to be drawn on the bottom of the map.
            </p></li></ul><p>
          All canvases of one layer are held in an array. If there are multiple canvases with the same category, the
          canvas with the lower position in the array will be drawn below the one with the higher position.
        </p></div><div class="collapsibleAreaRegion" id="PriorityAndCategory"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Bringing Together Priority and Category</span></div><div id="ID2RBSection" class="collapsibleSection"><p>Up to now the following is known:</p><ul><li><p>Layers are ordered by their priority.</p></li><li><p>Canvases are ordered by category.</p></li></ul><p>
          Having a look on both - canvases and layers - the following summarized situation exists: All canvases are
          taken together and are ordered by category. Like this, the background canvases are painted first and the
          others are painted on top. For each category, the canvases are ordered using the layer sequence. For each
          canvas the layer to which it belongs is known and like this an order to all canvases
          staying in "content" category can be given for example.
        </p><div class="mediaCenter"><img alt="Layers And Canvases" src="../media/LayersAndCanvases.png" /><div class="caption">Layer priorities and canvas categories</div></div></div><div class="collapsibleAreaRegion" id="ChangingPriority"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Changing Layer Priority</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          It is possible to change the layer priority by some clicks. For that, just expand the
          <a href="T_Ptv_XServer_Controls_Map_Gadgets_LayersGadget.htm">LayersGadget</a>,
          drag a layer at the naming text and drop it at a position between two other layers. After dropping the layer,
          the canvases are reordered and the map is repainted.
        </p><p>
          For a change of the layer ordering, the canvases are reordered for each category separately but
          synchronously. For each category, the new layer order is applied. The following figure shows what happens if
          the sequence of two layers is inverted.
        </p><div class="mediaCenter"><img alt="Changing Layer Sequence" src="../media/ChangingLayerSequence.png" /><div class="caption">Changing the layer sequence</div></div></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID4RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_LayerCollection.htm">LayerCollection</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Canvases_MapCanvas.htm">MapCanvas</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Canvases_CanvasCategory.htm">CanvasCategory</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Gadgets_LayersGadget.htm">LayersGadget</a></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="efdeef71-8995-49a7-b15c-01f3dd65a3c8.htm">Custom Layers Concept</a></div></div></div></div><div id="pageFooter" class="pageFooter">Visit our website at <a href="http://www.ptvgroup.com">www.ptvgroup.com</a> or browse to <a href="http://xserver.ptvgroup.com">xserver.ptvgroup.com</a> for the latest information on our developer components.<p>Copyright (c) PTV Group, Karlsruhe, Germany.</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:developer%40ptvgroup.com?Subject=PTV xServer .NET">developer@ptvgroup.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>