<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Add an XMapServer Layer</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="b55f5d50-a421-4951-bc01-d5fb85c94f54" /><meta name="Microsoft.Help.ContentType" content="Samples" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">PTV xServer .NET<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\9e985ce7-8d43-434f-82bb-260b742553c1.htm" title="PTV xServer .NET" tocid="roottoc">PTV xServer .NET</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4.htm" title="How To ..." tocid="a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4">How To ...</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5ff21e55-6f37-451d-acae-9321ca31836d.htm" title="XServer Connection" tocid="5ff21e55-6f37-451d-acae-9321ca31836d">XServer Connection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/714dc4ba-10d3-4a8d-a55d-6210630ff6eb.htm" title="Show Here Satellite View" tocid="714dc4ba-10d3-4a8d-a55d-6210630ff6eb">Show Here Satellite View</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4926f311-8333-4b18-b509-70c1d876d5eb.htm" title="Show Clusters" tocid="4926f311-8333-4b18-b509-70c1d876d5eb">Show Clusters</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/101dba72-fb36-468b-aa99-4b9c5bbfb62f.htm" title="Add Different Shapes" tocid="101dba72-fb36-468b-aa99-4b9c5bbfb62f">Add Different Shapes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e9f559c7-394c-4858-8a40-4744d2fc7200.htm" title="Integrate an additional WPF map" tocid="e9f559c7-394c-4858-8a40-4744d2fc7200">Integrate an additional WPF map</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6b437145-f3ed-4267-a3fc-e71737e6db65.htm" title="Add a GeoRSS Layer" tocid="6b437145-f3ed-4267-a3fc-e71737e6db65">Add a GeoRSS Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d705537f-f7fe-435c-bd80-d4d399ee4410.htm" title="Show Map&amp;Market Data" tocid="d705537f-f7fe-435c-bd80-d4d399ee4410">Show Map&amp;Market Data</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/427ab62e-f02d-4e92-9c26-31e0f89d49c5.htm" title="Show a Shape File Content" tocid="427ab62e-f02d-4e92-9c26-31e0f89d49c5">Show a Shape File Content</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2f6d7ed1-b136-44dc-97c1-3f2c640c2134.htm" title="Add a WMS Layer" tocid="2f6d7ed1-b136-44dc-97c1-3f2c640c2134">Add a WMS Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fccd9937-aa04-4803-936d-7796cb966963.htm" title="Selection" tocid="fccd9937-aa04-4803-936d-7796cb966963">Selection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/90fd0772-df3b-473b-a305-6ee939193c7f.htm" title="Apply a UI Theme" tocid="90fd0772-df3b-473b-a305-6ee939193c7f">Apply a UI Theme</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/fe48cb51-c6ce-487e-b4c0-168537c184c3.htm" title="Geocode an Address" tocid="fe48cb51-c6ce-487e-b4c0-168537c184c3">Geocode an Address</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7c12cc4-3819-470e-867a-b521bee43cf0.htm" title="Elementary Routing" tocid="e7c12cc4-3819-470e-867a-b521bee43cf0">Elementary Routing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e4c416a0-9573-4df8-b733-3bf72539ef0f.htm" title="Drag&amp;Drop Routing" tocid="e4c416a0-9573-4df8-b733-3bf72539ef0f">Drag&amp;Drop Routing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/34f6b520-454f-4a6a-b0ae-00fc77da512b.htm" title="Tour Planning" tocid="34f6b520-454f-4a6a-b0ae-00fc77da512b">Tour Planning</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/eb8e522c-5ed2-4481-820f-bfd74ee2aeb8.htm" title="Use the Map Gadgets" tocid="eb8e522c-5ed2-4481-820f-bfd74ee2aeb8">Use the Map Gadgets</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fdaa5363-b092-43cc-950e-6f120dee0d92.htm" title="Set the Map Location" tocid="fdaa5363-b092-43cc-950e-6f120dee0d92">Set the Map Location</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/b55f5d50-a421-4951-bc01-d5fb85c94f54.htm" title="Add an XMapServer Layer" tocid="b55f5d50-a421-4951-bc01-d5fb85c94f54">Add an XMapServer Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/91617b6b-1086-4c05-a1ce-4c64f8bc7dcd.htm" title="Add a Custom Layer" tocid="91617b6b-1086-4c05-a1ce-4c64f8bc7dcd">Add a Custom Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/88521cb3-0770-4f9c-9e47-74b6ea02b6eb.htm" title="Build an ActiveX Control" tocid="88521cb3-0770-4f9c-9e47-74b6ea02b6eb">Build an ActiveX Control</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1cdf95ec-699c-4d92-bc98-df93503e5a4e.htm" title="Build a C++/MFC application" tocid="1cdf95ec-699c-4d92-bc98-df93503e5a4e">Build a C++/MFC application</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Add an XMapServer Layer</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p /></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Demonstrates</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          The <a href="T_Ptv_XServer_Controls_Map_Map.htm">Map</a> object provides a layer management
          containing any kind of layer types. To get quickly filled this set of available layers, the XMapServer can be used for it.
          Besides the filling of the map content with background information, individual points of interest and 
          RoadEditor information can be integrated:
        </p><div class="subSection"><ol><li><p>
                  Background information consists of geographical information like towns, streets and areas (forests, lakes and population areas).
                  This information is commonly used to provide a geographical context to individual data.
                </p><div class="mediaCenter"><img alt="XMap Base Layers" src="../media/XMapBaseLayers.png" /><div class="caption">Background layers</div></div></li><li><p>
                  Points of interest are specific geographical point locations that someone may find useful or interesting. This information
                  can be shown on top of the previously mentioned background information, which helps to found out 'where these points are'.
                </p><div class="mediaCenter"><img alt="XMapPOIs" src="../media/XMapPOIs.png" /><div class="caption">Background layers</div></div></li><li><p>
                  The RoadEditor represents a concept which manages all modifications in a road network. The road network consists of several
                  roads, each one containing a set of attributes (or properties), which may influence the results of a route calculation.
                  Multiple modifications can be summed up to an attribute set, and the RoadEditor is capable of managing multiple attribute sets.
                  A good example for such a set are the so-called 'Truck attributes', initiated and maintained by Navteq.
                  Each of these sets can be visualized in the map by showing corresponding traffic signs at the corresponding road location.
                </p><div class="mediaCenter"><img alt="XMap Road Editor" src="../media/XMapRoadEditor.png" /><div class="caption">Background layers</div></div></li></ol></div><p>
          The following description gives some important hints how to integrate these layers of different types into the map.
        </p></div><div class="collapsibleAreaRegion" id="ImportantConcepts"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Important concepts</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          Please refer to the <a href="8f6464b9-058b-4427-93a1-a0ce88eab26e.htm">Map and Layers Concept</a> topic for details.
        </p></div><div class="collapsibleAreaRegion" id="XMapServerMetaInfo"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Preparations needed for XMapServer access</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          For the following steps, i.e. creation of new layers and their insertion into the map, some basic settings have to
          be met for accessing the XMapServer commonly. Especially the URL, user name and password for HTTP-authentication,
          and copyright texts are concentrated in the class 
          <a href="T_Ptv_XServer_Controls_Map_Tools_XMapMetaInfo.htm">XMapMetaInfo</a>. Multiple instances of this
          class can be used to access layers located on different XMapServers. A concrete instantiation of a meta info may 
          look like this:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID2EABAEAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID2EABAEAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID2EABAEAAA');return false;" title="Copy">Copy</a></div></div><div id="ID2EABAEAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// First example: No specifications, everything trusts on the default values, including a local XMapServer URL</span>
XMapMetaInfo simpleXmapMetaInfo = <span class="highlight-keyword">new</span> XMapMetaInfo();

<span class="highlight-comment">// Second example: Complete specification of URL, copyright, user name and password:</span>
XMapMetaInfo xmapMetaInfo = <span class="highlight-keyword">new</span> XMapMetaInfo(Properties.Settings.Default.XMapUrl)
{
  CopyrightText = <span class="highlight-literal">"PTV, NAVTEQ, AND"</span>,
  User = Properties.Settings.Default.XMapUser,
  Password = Properties.Settings.Default.XMapPassword
};</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID2EABAEAAA");</script><p>
          If an instance of XMapMetaInfo is completely configured, it can be used in the following steps, which creates the
          XMapServer layers finally. All these steps use the factory class 
          <a href="T_Ptv_XServer_Controls_Map_Layers_XMapLayerFactory.htm">XMapLayerFactory</a>, which implements
          factory methods as extensions to the
          <a href="T_Ptv_XServer_Controls_Map_LayerCollection.htm">LayerCollection</a> class.
        </p></div><div class="collapsibleAreaRegion" id="BackgroundLayers"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />How to create the background layer</span></div><div id="ID4RBSection" class="collapsibleSection"><p> 
          For all required background information new layers are created for streets, towns, areas and their corresponding labels.
          All these layers are created and inserted into the layer management of the map by means of the following statement: 
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID2EAAADAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID2EAAADAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID2EAAADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID2EAAADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">wpfMap.Layers.InsertXMapBaseLayers(xmapMetaInfo);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID2EAAADAAA");</script></div><div class="collapsibleAreaRegion" id="POILayers"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />How to integrate layers containing points of interest</span></div><div id="ID5RBSection" class="collapsibleSection"><p>
          Each XMapServer installation provides a set of profiles, which address databases containing points of interest. These
          profiles are essential for a successful creation of a POI layer and are located in the subdirectory 'conf' of the 
          installation directory of XMapServer. Therefore please check if the addressed POIs are available on the underlying
          XServer system. Necessary profiles should have been provided with the xServer POI installation package.
        </p><p>
          The following code snippet shows how to integrate a POI layer into the map content by providing the profile name
          and the caption. The latter is visible in the in the Quick Settings gadget for example:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID2EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID2EAAACAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID2EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID2EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">wpfMap.Layers.InsertPOI(<span class="highlight-literal">"default.points-of-interest"</span>, <span class="highlight-literal">"POIs"</span>, xmapMetaInfo);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID2EAAACAAA");</script></div><div class="collapsibleAreaRegion" id="RoadEditorLayers"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID6RB')" onkeypress="SectionExpandCollapse_CheckKey('ID6RB', event)" tabindex="0"><img id="ID6RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />How to integrate the RoadEditor truck attributes</span></div><div id="ID6RBSection" class="collapsibleSection"><p>
          Similar to the POI layer integration, a RoadEditor layer is integrated by specifying the corresponding xMap profile
          and the caption. The RoadEditor integration in the map control requires a specific rendering profile to be deployed
          on the XMapServer. This profile (accompanied by an additional ini-file) is provided in the SDK in the folder 
          <em>SDK-installdir/Sources/Samples/XMapRoadEditor</em>. Please copy these files into the subdirectory 'conf' of the
          installation directory of XMapServer.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID2EAAABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID2EAAABAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID2EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID2EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">wpfMap.Layers.InsertRoadEditor(<span class="highlight-literal">"truckattributes"</span>, <span class="highlight-literal">"Truck attributes"</span>, xmapMetaInfo);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID2EAAABAAA");</script></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID7RB')" onkeypress="SectionExpandCollapse_CheckKey('ID7RB', event)" tabindex="0"><img id="ID7RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID7RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Layers_XMapLayerFactory.htm">XMapLayerFactory</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Tools_XMapMetaInfo.htm">XMapMetaInfo</a></div></div></div></div><div id="pageFooter" class="pageFooter">Visit our website at <a href="http://www.ptvgroup.com">www.ptvgroup.com</a> or browse to <a href="http://xserver.ptvgroup.com">xserver.ptvgroup.com</a> for the latest information on our developer components.<p>Copyright (c) PTV Group, Karlsruhe, Germany.</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:developer%40ptvgroup.com?Subject=PTV xServer .NET">developer@ptvgroup.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>