<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Map Viewport Concept</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="28b979e6-9140-4d12-b62a-ef9a5be263a4" /><meta name="Description" content="This page explains the relation between the viewport events of the map and the strategies to display data depending on the current map section." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">PTV xServer .NET<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\9e985ce7-8d43-434f-82bb-260b742553c1.htm" title="PTV xServer .NET" tocid="roottoc">PTV xServer .NET</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/7101665d-481f-449c-ae22-4f6a21aba3e8.htm" title="Concepts" tocid="7101665d-481f-449c-ae22-4f6a21aba3e8">Concepts</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/06a654f3-afbd-4f00-9c8e-36997e2a3951.htm" title="Shape Layer Concept" tocid="06a654f3-afbd-4f00-9c8e-36997e2a3951">Shape Layer Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/efdeef71-8995-49a7-b15c-01f3dd65a3c8.htm" title="Custom Layers Concept" tocid="efdeef71-8995-49a7-b15c-01f3dd65a3c8">Custom Layers Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/22E8CFA4-B9CE-4F97-A90D-C32E3AF957F9.htm" title="Coordinates Concept" tocid="22E8CFA4-B9CE-4F97-A90D-C32E3AF957F9">Coordinates Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/918149a8-2996-40a9-878d-12a002e6b222.htm" title="Layer Priorities Concept" tocid="918149a8-2996-40a9-878d-12a002e6b222">Layer Priorities Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8f6464b9-058b-4427-93a1-a0ce88eab26e.htm" title="Map and Layers Concept" tocid="8f6464b9-058b-4427-93a1-a0ce88eab26e">Map and Layers Concept</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/28b979e6-9140-4d12-b62a-ef9a5be263a4.htm" title="Map Viewport Concept" tocid="28b979e6-9140-4d12-b62a-ef9a5be263a4">Map Viewport Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5e97e57f-ad50-4dda-af0b-e117af8c4fcd.htm" title="Theming Concept" tocid="5e97e57f-ad50-4dda-af0b-e117af8c4fcd">Theming Concept</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/12bdf69b-60fc-4fe9-86e6-16b0adac2972.htm" title="Logging Concept" tocid="12bdf69b-60fc-4fe9-86e6-16b0adac2972">Logging Concept</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Map Viewport Concept</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>
        This page explains the relation between the viewport events of the map and the strategies to display data
        depending on the current map section.
      </p><p>
        When the user or application triggers a navigation action like zooming or panning and the map uses animations,
        the viewport properties can be used to query the visible map section before, while and after the transition
        to the new map section.
      </p><p>This page contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#ViewPortEvents">Viewport Events and Map Properties</a></li><li class="outlineSectionEntry"><a href="#Map">Map</a></li><li class="outlineSectionEntry"><a href="#MapView">Map View</a></li><li class="outlineSectionEntry"><a href="#MapCanvas">Map Canvas</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul></div><div class="collapsibleAreaRegion" id="ViewPortEvents"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Viewport Events and Map Properties</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          The viewport events of the map can be used to optimize fetching data and overlays. An event always signals
          that there has been executed an action which changed some properties of the map. To always know about the
          change action, the map stores the current state of the properties and the target state of the properties.
          In the following, the "current properties" are discussed which store the state at this time and 
          the "final properties" which store the target state. In the sections below, sample properties can be found
          for which current and final states are stored. These properties also have "current" or "final" in their
          names.
        </p><ul><li><a href="E_Ptv_XServer_Controls_Map_IMap_ViewportBeginChanged.htm">ViewportBeginChanged</a> - Fired
            before the transition starts. The "final properties" already contain the anticipated viewport properties.
          </li><li><a href="E_Ptv_XServer_Controls_Map_IMap_ViewportWhileChanged.htm">ViewportWhileChanged</a> - Fired
            while the transition starts. The "current properties" converge to the "final properties".
          </li><li><a href="E_Ptv_XServer_Controls_Map_IMap_ViewportEndChanged.htm">ViewportEndChanged</a> - Fired
            after the transition is completed. The "current properties" are equal to the "final properties".
          </li></ul><p>
          The distinction between "current" and "final" properties together with the viewport events allows fine-tuning
          the interactivity of the layering. An example is the
          <a href="T_Ptv_XServer_Controls_Map_Layers_Untiled_UntiledLayer.htm">UntiledLayer</a>, which
          catches the <a href="E_Ptv_XServer_Controls_Map_IMap_ViewportBeginChanged.htm">ViewportBeginChanged</a>
          event and queries the anticipated overlay while the animation is in progress
          using the <a href="P_Ptv_XServer_Controls_Map_MapView_FinalEnvelope.htm">FinalEnvelope</a>
          property.
        </p><div class="mediaCenter"><img alt="View Port Changed" src="../media/ViewPortChanged.png" /><div class="caption">Viewport Events and Properties</div></div></div><div class="collapsibleAreaRegion" id="Map"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Map</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          The standard fields of the <a href="T_Ptv_XServer_Controls_Map_IMap.htm">IMap</a> type
          always contain the properties for the end of an animation. To query the properties while the map is animated,
          there are additional properties:
        </p><p>
          Properties querying the current state during an animation:
        </p><ul><li><a href="M_Ptv_XServer_Controls_Map_IMap_GetCurrentEnvelope.htm">GetCurrentEnvelope<span id="LST69531F57_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST69531F57_0?cs=()|vb=|cpp=()|nu=()|fs=()");</script></a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_CurrentZoomLevel.htm">CurrentZoomLevel</a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_CurrentScale.htm">CurrentScale</a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_CurrentCenter.htm">CurrentCenter</a></li></ul><p>
          Properties querying the final state at the end of an animation:
        </p><ul><li><a href="M_Ptv_XServer_Controls_Map_IMap_GetEnvelope.htm">GetEnvelope<span id="LST69531F57_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST69531F57_1?cs=()|vb=|cpp=()|nu=()|fs=()");</script></a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_ZoomLevel.htm">ZoomLevel</a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_Scale.htm">Scale</a></li><li><a href="P_Ptv_XServer_Controls_Map_IMap_Center.htm">Center</a></li></ul></div><div class="collapsibleAreaRegion" id="MapView"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Map View</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          The <a href="T_Ptv_XServer_Controls_Map_MapView.htm">MapView</a> also supports the concept
          of a current and a final viewport. It has the same events as the IMap interface and uses pairs of properties
          for the current and the final map viewport.
        </p><ul><li><a href="P_Ptv_XServer_Controls_Map_MapView_CurrentZoom.htm">CurrentZoom</a> /
            <a href="P_Ptv_XServer_Controls_Map_MapView_FinalZoom.htm">FinalZoom</a></li><li><a href="P_Ptv_XServer_Controls_Map_MapView_CurrentX.htm">CurrentX</a> /
            <a href="P_Ptv_XServer_Controls_Map_MapView_FinalX.htm">FinalX</a></li><li><a href="P_Ptv_XServer_Controls_Map_MapView_CurrentY.htm">CurrentY</a> /
            <a href="P_Ptv_XServer_Controls_Map_MapView_FinalY.htm">FinalY</a></li><li><a href="P_Ptv_XServer_Controls_Map_MapView_CurrentScale.htm">CurrentScale</a> /
            <a href="P_Ptv_XServer_Controls_Map_MapView_FinalScale.htm">FinalScale</a></li><li><a href="P_Ptv_XServer_Controls_Map_MapView_CurrentEnvelope.htm">CurrentEnvelope</a> /
            <a href="P_Ptv_XServer_Controls_Map_MapView_FinalEnvelope.htm">FinalEnvelope</a></li></ul></div><div class="collapsibleAreaRegion" id="MapCanvas"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Map Canvas</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          The <a href="T_Ptv_XServer_Controls_Map_Canvases_MapCanvas.htm">MapCanvas</a> has a reference to the
          map view parent object to query the viewport state of the map view. The
          <a href="M_Ptv_XServer_Controls_Map_Canvases_MapCanvas_Update.htm">Update(UpdateMode)</a> 
          method is called whenever a viewport event is triggered. The
          <a href="T_Ptv_XServer_Controls_Map_Canvases_UpdateMode.htm">UpdateMode</a> indicates the type
          of the event.
        </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID4RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_IMap.htm">IMap</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_MapView.htm">MapView</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Canvases_MapCanvas.htm">MapCanvas</a></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="efdeef71-8995-49a7-b15c-01f3dd65a3c8.htm">Custom Layers Concept</a></div></div></div></div><div id="pageFooter" class="pageFooter">Visit our website at <a href="http://www.ptvgroup.com">www.ptvgroup.com</a> or browse to <a href="http://xserver.ptvgroup.com">xserver.ptvgroup.com</a> for the latest information on our developer components.<p>Copyright (c) PTV Group, Karlsruhe, Germany.</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:developer%40ptvgroup.com?Subject=PTV xServer .NET">developer@ptvgroup.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>