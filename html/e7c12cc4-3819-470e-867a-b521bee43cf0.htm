<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Elementary Routing</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="e7c12cc4-3819-470e-867a-b521bee43cf0" /><meta name="Description" content="This page explains the Elementary Routing use case which is provided with PTV xServer .NET." /><meta name="Microsoft.Help.ContentType" content="Samples" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">PTV xServer .NET<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\9e985ce7-8d43-434f-82bb-260b742553c1.htm" title="PTV xServer .NET" tocid="roottoc">PTV xServer .NET</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4.htm" title="How To ..." tocid="a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4">How To ...</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7c12cc4-3819-470e-867a-b521bee43cf0.htm" title="Elementary Routing" tocid="e7c12cc4-3819-470e-867a-b521bee43cf0">Elementary Routing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/39329e01-081c-4bf2-a7fc-e6d37bfe36e2.htm" title="Calling the xRoute API" tocid="39329e01-081c-4bf2-a7fc-e6d37bfe36e2">Calling the xRoute API</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/369117cc-72ae-4c60-922b-8669d2ad7e2b.htm" title="Displaying the xRoute result" tocid="369117cc-72ae-4c60-922b-8669d2ad7e2b">Displaying the xRoute result</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/681eeccc-6228-4744-991b-8ffc9bb71c40.htm" title="User interaction" tocid="681eeccc-6228-4744-991b-8ffc9bb71c40">User interaction</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Elementary Routing</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>This page explains the <span class="term">Elementary Routing</span> use case which is provided with PTV xServer .NET.</p><p>This page contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#ImportantConcepts">Important concepts</a></li><li class="outlineSectionEntry"><a href="#XRouteWebService">Calculating a route with the xRoute Web Service</a></li><li class="outlineSectionEntry"><a href="#DisplayWayPoints">Displaying the way points and the calculated route in the map</a></li><li class="outlineSectionEntry"><a href="#TourPointEditing">Providing user interaction for tour point editing</a></li><li class="outlineSectionEntry"><a href="#UseCases">Use case manual</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul></div><div class="collapsibleAreaRegion" id="ImportantConcepts"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Important concepts</span></div><div id="ID0RBSection" class="collapsibleSection"><p>The <span class="term">Elementary routing</span> use case uses an xRoute API which was originally generated by adding a 
        WebService reference to the project while specifying a WSDL-URL. It is important to check the option "Generate asynchronous operations" to support an asynchronous workflow.
        In the following, certain topics are explained in detail to give an insight to how the use case is implemented.</p></div><div class="collapsibleAreaRegion" id="XRouteWebService"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Calculating a route with the xRoute Web Service</span></div><div id="ID1RBSection" class="collapsibleSection"><p>As mentioned before the xRoute API is called asynchronously. That means code is needed which:</p><ul><li><p>triggers a request</p></li><li><p>provides an entry point for the response callback</p></li></ul><p><a href="39329e01-081c-4bf2-a7fc-e6d37bfe36e2.htm">The details of such an implementation can be found here.</a></p></div><div class="collapsibleAreaRegion" id="DisplayWayPoints"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Displaying the way points and the calculated route in the map</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          For displaying the way points and the calculated route in the map a <a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_ShapeLayer.htm">ShapeLayer</a>
          is used.  The concept therefore is very easy:
        </p><ul><li><p>Create controls which should be displayed in the ShapeLayer. These controls have to be <a href="http://msdn2.microsoft.com/en-us/library/ms602714" target="_blank">FrameworkElement</a>s.
            </p></li><li><p>For visualizing the way points the <a href="T_Ptv_XServer_Controls_Map_Symbols_Pin.htm">Pin</a> control is used.</p></li><li><p>For visualizing the route the <a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_MapPolyline.htm">MapPolyline</a> control is used. 
            As a specialty an animation called 'marching ants' is used.</p></li><li><p>Last but not least don´t forget to set the map envelope appropriately to get the route into view.</p></li></ul><p><a href="369117cc-72ae-4c60-922b-8669d2ad7e2b.htm">The details of such an implementation can be found here.</a></p></div><div class="collapsibleAreaRegion" id="TourPointEditing"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Providing user interaction for tour point editing</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          Since the user should be able to alter the default route or even calculate a completely new route some user interaction functionality had to be added.
          A context menu approach was chosen for this use case to handle that user interaction. So the issues to solve are:
        </p><ul><li><p>Determine the click point coordinates on the map and use them in the corresponding context.</p></li><li><p>Provide a context menu that allows the user to alter/clear the route parameters and trigger a route calculation.</p></li></ul><p><a href="681eeccc-6228-4744-991b-8ffc9bb71c40.htm">The details of such an implementation can be found here.</a></p></div><div class="collapsibleAreaRegion" id="UseCases"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Use case manual</span></div><div id="ID4RBSection" class="collapsibleSection"><p>This section describes how to use the elementary routing in the Demo Center sample.</p><p>This section contains the following subsections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#UseCase1">How to calculate a route and show it on the map</a></li><li class="outlineSectionEntry"><a href="#UseCase2">Editing the tour points in the UI</a></li></ul><h4 class="subHeading" id="UseCase1">How to calculate a route and show it on the map</h4><div class="subsection"><p>
              The elementary routing sample shows how to calculate a route and shows it on the map. Start, end and in between way points
              can be set. When the route is calculated, it is shown as a blue flowing line in the map. When
              starting the demo application, the route calculation result can be seen, if the checkbox is activated in the 
              <span class="term">Elementary routing</span> expander.
            </p><div class="mediaCenter"><img alt="Route Calculation 1" src="../media/RouteCalculation1.png" /><div class="caption">Route calculation use case</div></div></div><h4 class="subHeading" id="UseCase2">Editing the tour points in the UI</h4><div class="subsection"><p>
              By right-clicking a tour point in the map, it can be moved in the list of tour points or completely removed.
            </p><div class="mediaCenter"><img alt="Route Calculation 2" src="../media/RouteCalculation2.png" /><div class="caption">Context menu of a tour point</div></div><p>
              By right-clicking some arbitrary location on the map, it can be set as a way point in the list of tour points.
              Furthermore, the route can be calculated, cleared with the current tour points, or 
              the start and end of the tour can be redefined.
            </p><div class="mediaCenter"><img alt="Route Calculation 3" src="../media/RouteCalculation3.png" /><div class="caption">Context menu of an arbitrary location in the map</div></div></div></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_ShapeLayer.htm">ShapeLayer</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_MapPolyline.htm">MapPolyline</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Symbols_Pin.htm">Pin</a></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="39329e01-081c-4bf2-a7fc-e6d37bfe36e2.htm">Call the xRoute API.</a></div><div class="seeAlsoStyle"><a href="369117cc-72ae-4c60-922b-8669d2ad7e2b.htm">Display the route.</a></div><div class="seeAlsoStyle"><a href="681eeccc-6228-4744-991b-8ffc9bb71c40.htm">User interaction.</a></div></div></div></div><div id="pageFooter" class="pageFooter">Visit our website at <a href="http://www.ptvgroup.com">www.ptvgroup.com</a> or browse to <a href="http://xserver.ptvgroup.com">xserver.ptvgroup.com</a> for the latest information on our developer components.<p>Copyright (c) PTV Group, Karlsruhe, Germany.</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:developer%40ptvgroup.com?Subject=PTV xServer .NET">developer@ptvgroup.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>