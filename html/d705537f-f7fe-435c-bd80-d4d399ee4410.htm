<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Show Map&amp;Market Data</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="d705537f-f7fe-435c-bd80-d4d399ee4410" /><meta name="Description" content="This page explains the Map&amp;Market use case which is provided with PTV xServer .NET. It demonstrates the thematic visualization and interaction of complex data." /><meta name="Microsoft.Help.ContentType" content="Samples" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">PTV xServer .NET<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\9e985ce7-8d43-434f-82bb-260b742553c1.htm" title="PTV xServer .NET" tocid="roottoc">PTV xServer .NET</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4.htm" title="How To ..." tocid="a5bc5d46-5eb8-4b50-be53-1ffa3f7bc7f4">How To ...</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5ff21e55-6f37-451d-acae-9321ca31836d.htm" title="XServer Connection" tocid="5ff21e55-6f37-451d-acae-9321ca31836d">XServer Connection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/714dc4ba-10d3-4a8d-a55d-6210630ff6eb.htm" title="Show Here Satellite View" tocid="714dc4ba-10d3-4a8d-a55d-6210630ff6eb">Show Here Satellite View</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4926f311-8333-4b18-b509-70c1d876d5eb.htm" title="Show Clusters" tocid="4926f311-8333-4b18-b509-70c1d876d5eb">Show Clusters</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/101dba72-fb36-468b-aa99-4b9c5bbfb62f.htm" title="Add Different Shapes" tocid="101dba72-fb36-468b-aa99-4b9c5bbfb62f">Add Different Shapes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e9f559c7-394c-4858-8a40-4744d2fc7200.htm" title="Integrate an additional WPF map" tocid="e9f559c7-394c-4858-8a40-4744d2fc7200">Integrate an additional WPF map</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6b437145-f3ed-4267-a3fc-e71737e6db65.htm" title="Add a GeoRSS Layer" tocid="6b437145-f3ed-4267-a3fc-e71737e6db65">Add a GeoRSS Layer</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/d705537f-f7fe-435c-bd80-d4d399ee4410.htm" title="Show Map&amp;Market Data" tocid="d705537f-f7fe-435c-bd80-d4d399ee4410">Show Map&amp;Market Data</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/427ab62e-f02d-4e92-9c26-31e0f89d49c5.htm" title="Show a Shape File Content" tocid="427ab62e-f02d-4e92-9c26-31e0f89d49c5">Show a Shape File Content</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2f6d7ed1-b136-44dc-97c1-3f2c640c2134.htm" title="Add a WMS Layer" tocid="2f6d7ed1-b136-44dc-97c1-3f2c640c2134">Add a WMS Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fccd9937-aa04-4803-936d-7796cb966963.htm" title="Selection" tocid="fccd9937-aa04-4803-936d-7796cb966963">Selection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/90fd0772-df3b-473b-a305-6ee939193c7f.htm" title="Apply a UI Theme" tocid="90fd0772-df3b-473b-a305-6ee939193c7f">Apply a UI Theme</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/fe48cb51-c6ce-487e-b4c0-168537c184c3.htm" title="Geocode an Address" tocid="fe48cb51-c6ce-487e-b4c0-168537c184c3">Geocode an Address</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7c12cc4-3819-470e-867a-b521bee43cf0.htm" title="Elementary Routing" tocid="e7c12cc4-3819-470e-867a-b521bee43cf0">Elementary Routing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e4c416a0-9573-4df8-b733-3bf72539ef0f.htm" title="Drag&amp;Drop Routing" tocid="e4c416a0-9573-4df8-b733-3bf72539ef0f">Drag&amp;Drop Routing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/34f6b520-454f-4a6a-b0ae-00fc77da512b.htm" title="Tour Planning" tocid="34f6b520-454f-4a6a-b0ae-00fc77da512b">Tour Planning</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/eb8e522c-5ed2-4481-820f-bfd74ee2aeb8.htm" title="Use the Map Gadgets" tocid="eb8e522c-5ed2-4481-820f-bfd74ee2aeb8">Use the Map Gadgets</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fdaa5363-b092-43cc-950e-6f120dee0d92.htm" title="Set the Map Location" tocid="fdaa5363-b092-43cc-950e-6f120dee0d92">Set the Map Location</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/b55f5d50-a421-4951-bc01-d5fb85c94f54.htm" title="Add an XMapServer Layer" tocid="b55f5d50-a421-4951-bc01-d5fb85c94f54">Add an XMapServer Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/91617b6b-1086-4c05-a1ce-4c64f8bc7dcd.htm" title="Add a Custom Layer" tocid="91617b6b-1086-4c05-a1ce-4c64f8bc7dcd">Add a Custom Layer</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/88521cb3-0770-4f9c-9e47-74b6ea02b6eb.htm" title="Build an ActiveX Control" tocid="88521cb3-0770-4f9c-9e47-74b6ea02b6eb">Build an ActiveX Control</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1cdf95ec-699c-4d92-bc98-df93503e5a4e.htm" title="Build a C++/MFC application" tocid="1cdf95ec-699c-4d92-bc98-df93503e5a4e">Build a C++/MFC application</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Show Map&amp;Market Data</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>
        This page explains the <span class="term">Map&amp;Market</span> use case which is provided with PTV xServer .NET.
        It demonstrates the thematic visualization and interaction of complex data.
      </p><p>This page contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#ImportantConcepts">Basic concepts</a></li><li class="outlineSectionEntry"><a href="#MapLayers">The map layers</a></li><li class="outlineSectionEntry"><a href="#MapContent">Tiling the map content</a></li><li class="outlineSectionEntry"><a href="#StoringGeoData">Storing geo data</a></li><li class="outlineSectionEntry"><a href="#SomeOGCBasics">Some OGC basics</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul><div class="mediaCenter"><img alt="Map Market" src="../media/MapMarket.png" /><div class="caption">Map&amp;Market use case</div></div></div><div class="collapsibleAreaRegion" id="ImportantConcepts"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Basic concepts</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          The use case is implemented as a client-side "mesh-up" where the map content is composed from different images on the client.
          This enables the application to implement flexible interaction and rendering features, while still maintaining good performance.
        </p></div><div class="collapsibleAreaRegion" id="MapLayers"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />The map layers</span></div><div id="ID1RBSection" class="collapsibleSection"><p>In this use case, the map is composed by three separate layers:</p><ul><li><p>The tiled base map layer which displays the basic street map. </p></li><li><p>A custom tile layer which renders the dynamic application data. </p></li><li><p>The overlay for the labels of the base map. </p></li></ul><div class="mediaCenter"><img alt="Map Market Overview" src="../media/MapMarketOverview.png" /><div class="caption">Map composition for Map&amp;Market use case</div></div><p>
          While the base map layers are rendered using xMapServer, a custom renderer for districts is implemented. This renderer
          is used by the <a href="T_Ptv_XServer_Controls_Map_Layers_Tiled_TiledLayer.htm">TiledLayer</a> of the map control.
        </p></div><div class="collapsibleAreaRegion" id="MapContent"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Tiling the map content</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          The <a href="T_Ptv_XServer_Controls_Map_Layers_Tiled_TiledLayer.htm">TiledLayer</a> uses a rendering schema
          that composes the map using small images (tiles).
          This schema divides a map which is available in spherical Mercator projection recursively into images with 256x256 pixels size.
          A tile can be addressed using a tile-key combination of level, x- and y- index.
          For a comprehensive explanation of the tiling schema, see
          <a href="http://msdn.microsoft.com/en-us/library/bb259689.aspx" target="_blank">Bing Maps Tile System</a>.
      </p><div class="mediaCenter"><img alt="Bing Maps Tiles" src="../media/BingMapsTiles.png" /><div class="caption">Standard Tile System</div></div></div><div class="collapsibleAreaRegion" id="StoringGeoData"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Storing geo data</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          The geographic data used for this use case consists of German districts. Each district has a geometry and a set
          of socio-demographic data. Both the geometry and the user data are stored in an MS Access database.
          This database has been chosen for the use case, because it runs without additional prerequisites
          on the client. For a real-world multi-tier application, a server-based database - preferably a
          spatial-database - would be more suitable.
        </p><p>
          The use case defines the data for the districts the same way
          <a href="http://mapandmarket.ptvgroup.com" target="_blank">PTV Map&amp;Market</a> does:
          A table stores the geometry as blob field containing the 
          <a href="http://www.opengeospatial.org" target="_blank">OGC</a> 
          well-known-binary (WKB) representation of the geometry.
          Additional fields (XMIN, YMIN, XMAX, XMAX) store the bounding rectangle of the geometry.
          The table can contain additional user attributes, here socio-demographic data.
          All coordinates are stored in PTV_Mercator projection.
        </p><div class="mediaCenter"><img alt="MMMDB" src="../media/MMMDB.png" /><div class="caption">Access database for the use case</div></div></div><div class="collapsibleAreaRegion" id="SomeOGCBasics"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Some OGC basics</span></div><div id="ID4RBSection" class="collapsibleSection"><p>This sample utilizes some concepts from the Open Geospatial Consortium (OGC).</p><h4 class="subHeading">OGC simple feature specification</h4><div class="subsection"><p>A useful OGC standard is the 
              <a href="http://en.wikipedia.org/wiki/Simple_Features" target="_blank">OGC simple feature access</a>, which defines the basic geometry types "Point", "LineString" and "Polygon".
              Polygons can have holes which are defined by "inner rings". A "MultiPolygon" contains
              multiple single polygons. (Multi)polygons are the basic geometry types for the
              districts.
            </p><div class="mediaCenter"><img alt="OGCGeometry Types" src="../media/OGCGeometryTypes.png" /><div class="caption">Basic OGC geometry types</div></div></div><h4 class="subHeading">WKB and WKT representation</h4><div class="subsection"><p>To persist the geometry types, a binary and a textual definition define
            the storage format. A new GeoJSON format is used in the JavaScript context.
            </p><div class="mediaCenter"><img alt="OGCPoly Formats" src="../media/OGCPolyFormats.png" /><div class="caption">Polygon (with void) stored as - WKB, WKT and GeoJSON</div></div></div></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_ShapeLayer.htm">ShapeLayer</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Layers_Shapes_MapPolyline.htm">MapPolyline</a></div><div class="seeAlsoStyle"><a href="T_Ptv_XServer_Controls_Map_Symbols_Pin.htm">Pin</a></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="http://www.opengeospatial.org" target="_blank">OGC</a></div><div class="seeAlsoStyle"><a href="39329e01-081c-4bf2-a7fc-e6d37bfe36e2.htm">Call the xRoute API.</a></div><div class="seeAlsoStyle"><a href="369117cc-72ae-4c60-922b-8669d2ad7e2b.htm">Display the route.</a></div><div class="seeAlsoStyle"><a href="681eeccc-6228-4744-991b-8ffc9bb71c40.htm">User interaction.</a></div></div></div></div><div id="pageFooter" class="pageFooter">Visit our website at <a href="http://www.ptvgroup.com">www.ptvgroup.com</a> or browse to <a href="http://xserver.ptvgroup.com">xserver.ptvgroup.com</a> for the latest information on our developer components.<p>Copyright (c) PTV Group, Karlsruhe, Germany.</p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:developer%40ptvgroup.com?Subject=PTV xServer .NET">developer@ptvgroup.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>